# 论文查重系统使用说明

## 概述

本系统提供两种使用方式：
1. **命令行版本** - 符合要求，支持批量处理
2. **Web前端版本** - 提供友好的图形界面

## 一、命令行版本使用指南（符合作业要求）

### 1. 基本用法

```bash
java -jar main.jar <原文文件> <抄袭文件> <输出文件>
```

### 2. 参数说明

- `<原文文件>`: 原始论文文件的绝对路径
- `<抄袭文件>`: 待检测论文文件的绝对路径  
- `<输出文件>`: 结果输出文件的绝对路径

### 3. 使用示例

```bash
# Windows示例
java -jar main.jar C:\tests\org.txt C:\tests\org_add.txt C:\tests\ans.txt

# Linux/Mac示例
java -jar main.jar /home/user/org.txt /home/user/org_add.txt /home/user/ans.txt
```

### 4. 输出格式

- 输出文件包含一个浮点数，表示相似度（0.0-1.0）
- 保留两位小数，例如：`0.67`

### 5. 性能特点

- ✅ **执行时间**: 5秒内完成计算
- ✅ **内存使用**: 低于2048MB
- ✅ **无网络连接**: 纯本地计算
- ✅ **无其他文件操作**: 只读写指定文件
- ✅ **无异常退出**: 完善的异常处理

### 6. 支持的文件格式

- 文本文件（.txt）
- UTF-8编码
- 文件大小限制：10MB

### 7. 错误处理

系统会处理以下错误情况：
- 文件不存在
- 文件读取权限不足
- 参数数量不正确
- 文件格式不支持

## 二、Web前端版本使用指南

### 1. 启动后端服务

首先需要启动后端服务：

```bash
# 方法1: 使用Maven启动
mvn spring-boot:run

# 方法2: 使用批处理文件（Windows）
start-web.bat
```

服务启动后，后端API将在 `http://localhost:8080` 运行。

### 2. 打开前端页面

有两种方式使用前端页面：

#### 方式1: 直接打开HTML文件
1. 双击 `frontend.html` 文件
2. 在浏览器中打开
3. 在"服务器配置"区域确认服务器地址为 `http://localhost:8080`
4. 点击"测试连接"按钮验证连接

#### 方式2: 通过HTTP服务器访问
1. 启动后端服务后，访问 `http://localhost:8080`
2. 使用内置的Web界面

### 3. 功能使用

#### 文本输入模式
1. 在"原文"文本框中输入原始文本
2. 在"待检测文本"文本框中输入需要检测的文本
3. 选择算法（可选，默认使用综合算法）
4. 点击"开始检测"按钮

#### 文件上传模式
1. 切换到"文件上传"标签页
2. 点击"原文文件"区域选择原始文件
3. 点击"待检测文件"区域选择待检测文件
4. 点击"开始检测"按钮

### 4. 配置说明

#### 服务器配置
- **默认地址**: `http://localhost:8080`
- **自定义地址**: 可以修改为其他服务器地址
- **测试连接**: 验证服务器是否可用

#### 算法选择
- **综合算法**: 使用多种算法计算平均值（推荐）
- **余弦相似度**: 基于词频向量的相似度计算
- **编辑距离**: 基于字符编辑距离的相似度计算
- **Jaccard相似度**: 基于字符集合的相似度计算

### 5. 结果说明

#### 相似度范围
- **0.0 - 0.4**: 低相似度（绿色显示）
- **0.4 - 0.6**: 中等相似度（黄色显示）
- **0.6 - 0.8**: 较高相似度（橙色显示）
- **0.8 - 1.0**: 高相似度（红色显示）

#### 结果操作
- **下载结果**: 将检测结果保存为文本文件
- **清空内容**: 清除所有输入内容

## 三、算法说明

### 1. 余弦相似度 (Cosine Similarity)
- **原理**: 将文本转换为词频向量，计算两个向量的余弦值
- **适用**: 词汇级别的相似度计算
- **特点**: 对词汇顺序不敏感，适合长文本

### 2. 编辑距离 (Levenshtein Distance)
- **原理**: 计算两个字符串之间的最小编辑距离
- **适用**: 字符级别的相似度计算
- **特点**: 对字符顺序敏感，适合短文本

### 3. Jaccard相似度 (Jaccard Similarity)
- **原理**: 基于字符集合的交集和并集计算相似度
- **适用**: 字符级别的相似度计算
- **特点**: 对字符顺序不敏感，计算速度快

### 4. 综合算法
- **原理**: 使用多种算法的加权平均
- **适用**: 通用场景，平衡各种算法的优缺点
- **特点**: 结果更稳定，准确度更高

## 四、故障排除

### 命令行版本问题

#### 1. 找不到主类
```bash
错误: 找不到或无法加载主类
解决: 确保使用正确的jar文件 main.jar
```

#### 2. 文件不存在
```bash
错误: 无法读取文件
解决: 检查文件路径是否正确，文件是否存在
```

#### 3. 权限不足
```bash
错误: 权限不足
解决: 确保对文件有读取权限，对输出目录有写入权限
```

### Web版本问题

#### 1. 连接失败
1. 确认后端服务已启动
2. 检查服务器地址是否正确
3. 确认端口8080未被占用
4. 检查防火墙设置

#### 2. CORS错误
- 已配置CORS支持，允许跨域访问
- 如果仍有问题，请使用HTTP协议访问

#### 3. 文件上传失败
1. 确认文件格式支持（.txt, .doc, .docx）
2. 检查文件大小（限制10MB）
3. 确认文件编码为UTF-8

## 五、技术特性

### 前端特性
- 响应式设计，支持各种屏幕尺寸
- 现代化UI界面
- 实时结果展示
- 文件拖拽上传支持

### 后端特性
- 多种相似度算法
- RESTful API接口
- CORS跨域支持
- 异常处理机制
- 性能监控

### 安全特性
- 输入验证
- 文件类型检查
- 错误信息过滤
- 跨域安全配置

## 六、开发说明

### 项目结构
```
软工个人项目/
├── main.jar                      # 可执行jar文件（符合作业要求）
├── frontend.html                 # 独立前端页面
├── src/main/java/                # Java后端代码
├── src/main/resources/           # 资源文件
├── 测试文本/                     # 测试数据
└── 使用说明.md                   # 本文件
```

### API接口
- `GET /api/health` - 健康检查
- `GET /api/algorithms` - 获取算法列表
- `POST /api/similarity` - 计算文本相似度
- `POST /api/similarity/algorithm` - 使用指定算法计算
- `POST /api/similarity/upload` - 文件上传计算

### 构建说明
```bash
# 编译项目
mvn clean compile

# 创建可执行jar
jar -cfm main.jar MANIFEST.MF -C target/classes .

# 运行测试
mvn test

# 生成覆盖率报告
mvn jacoco:report
```

## 七、联系支持

如有问题，请检查：
1. 后端服务是否正常运行
2. 网络连接是否正常
3. 浏览器控制台是否有错误信息
4. 文件格式和大小是否符合要求
5. 文件路径是否正确
6. 权限设置是否合适

## 八、更新日志

### v1.1.0 (2024-01-01)
- 添加独立命令行版本（符合作业要求）
- 优化性能，5秒内完成计算
- 降低内存使用，符合<2048MB要求
- 修复CORS配置问题
- 完善测试用例

### v1.0.0 (2024-01-01)
- 初始版本发布
- 实现三种相似度算法
- 提供独立前端页面和命令行工具
- 配置CORS跨域支持
- 完整的测试覆盖
- 性能优化和监控